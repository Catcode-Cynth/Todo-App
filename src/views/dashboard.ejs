<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Dashboard | TodoApp</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div class="card">
    <h2>Dashboard</h2>

    <% if (user) { %>
      <p>Welcome, <%= user.username %></p>

      <!-- Task form -->
      <form action="/tasks" method="POST">
        <input type="text" name="title" placeholder="New task" required />
        <button type="submit">Add Task</button>
      </form>

      <h3>Pending Tasks</h3>
      <ul>
        <% pendingTasks.forEach(task => { %>
          <li>
            <%= task.title %>
            <a href="/tasks/<%= task._id %>/complete">Complete</a>
            <a href="/tasks/<%= task._id %>/delete">Delete</a>
          </li>
        <% }) %>
      </ul>

      <h3>Completed Tasks</h3>
      <ul>
        <% completedTasks.forEach(task => { %>
          <li class="completed"><%= task.title %></li>
        <% }) %>
      </ul>

      <a class="logout" href="/logout">Logout</a>
    <% } else { %>
      <p>Please log in or register to manage your tasks.</p>
      <div class="buttons">
        <a href="/login" class="btn">Login</a>
        <a href="/register" class="btn btn-secondary">Register</a>
      </div>
    <% } %>
  </div>
</body>
</html>
